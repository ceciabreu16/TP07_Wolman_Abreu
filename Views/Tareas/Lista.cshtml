
@{
    ViewData["Title"] = "Usuario";
}
<header>
    <h2>Usuario: @ViewBag.usuario</h2>
</header><main>
    <a class="btn" href='@Url.Action("NuevaTarea", "Tareas")'>Agregar Tarea</a>
    
    <div class="task-grid">
    @if (ViewBag.listaTareas != null)
    {
        foreach (var tarea in ViewBag.listaTareas)
        {
            if (!tarea.EstaEliminada)
            {
                var cardClass = tarea.EsPropia ? "card-propia" : "card-compartida";
                var tipoTarea = tarea.EsPropia ? "Tarea propia" : "Tarea compartida";
                var estadoClass = tarea.EstaFinalizada ? "estado-finalizada" : "";
    <div class="task-card @cardClass @estadoClass">
        <h3>@tarea.Titulo</h3>
        <p class="tipo-tarea">@tipoTarea</p>
        <p><strong>Fecha:</strong> @tarea.FechaCreacion.ToString("dd/MM/yyyy")</p>
        <p><strong>Estado:</strong> @(tarea.EstaFinalizada ? "Finalizada" : "Activa")</p>
        @if (tarea.EsPropia)
        {
            <a href='@Url.Action("Editar", "Tareas", new { id = tarea.Id })'>Editar</a>
        }
        else
        {
            <span class="no-editable">No editable</span>
        }
    </div>
            }
        }
    }
    else
    {
        <p>No hay tareas disponibles.</p>
    }
    </div>

    <form method="post" action="@Url.Action("Logout", "Auth")" class="logout-form">
        <input type="submit" value="Cerrar sesiÃ³n" class="btn danger" />
    </form>
</main>
