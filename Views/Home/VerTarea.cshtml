@*@{
    ViewData["Title"] = "Editar Tarea";
    var tarea = ViewBag.tarea as try_catch_poc.Models.Tareas;
}

<h2>Editar Tarea</h2>
<form method="post" action="/Home/EditarTarea">
    <input type="hidden" name="id" value="@tarea.Id" />
    Nombre de la tarea:
    <input type="text" name="Titulo" value="@tarea.Titulo" required /><br />
    Fecha necesaria:
    <input type="date" name="FechaCreacion" value="@tarea.FechaCreacion.ToString("yyyy-MM-dd")" required /><br />
    Estado de la tarea:<br />
    <input type="radio" name="estado" value="activa" @( (!tarea.EstaFinalizada && !tarea.EstaEliminada) ? "checked" : "" ) /> Activa<br />
    <input type="radio" name="estado" value="finalizada" @( (tarea.EstaFinalizada) ? "checked" : "" ) /> Finalizada<br />
    <input type="radio" name="estado" value="eliminada" @( (tarea.EstaEliminada) ? "checked" : "" ) /> Eliminada<br />
    <input type="submit" value="Guardar cambios" />
</form>
<a href="@Url.Action("Usuarios")">Volver</a>
*@

@{
    ViewData["Title"] = "Editar Tarea";
    var tarea = ViewBag.tarea as try_catch_poc.Models.Tareas;
}
<main class="centered">
    <div class="card">
        <h2>Editar Tarea</h2>
        <form method="post" action="/Home/EditarTarea" class="form">
            <input type="hidden" name="id" value="@tarea.Id" />

            <label>Nombre de la tarea:</label>
            <input type="text" name="Titulo" value="@tarea.Titulo" required />

            <label>Fecha necesaria:</label>
            <input type="date" name="FechaCreacion" value="@tarea.FechaCreacion.ToString("yyyy-MM-dd")" required />

            <label>Estado de la tarea:</label>
            <div class="radio-group">
                <label><input type="radio" name="estado" value="activa" @( (!tarea.EstaFinalizada &&
                                                                                                !tarea.EstaEliminada) ? "checked" : "" ) /> Activa</label>
                <label><input type="radio" name="estado" value="finalizada" @( (tarea.EstaFinalizada) ? "checked" : ""
                                                                                                    ) /> Finalizada</label>
                <label><input type="radio" name="estado" value="eliminada" @( (tarea.EstaEliminada) ? "checked" : ""
                                                                                                   ) /> Eliminada</label>
            </div>

            <input type="submit" value="Guardar cambios" class="btn" />
        </form>
        <form method="post" action="/Home/CompartirTarea" class="form">
            <input type="hidden" name="tareaId" value="@Model.Id" /> <!-- Campo oculto con el Id de la tarea -->
            <label>Compartir con usuario:</label>
            <input type="text" name="usuarioCompartir" placeholder="Buscar usuario" />
            <input type="submit" value="Compartir" class="btn" />
        </form>
        @if (ViewBag.Error != null)
        {
            <p class="error">@ViewBag.Error</p>
        }
        @if (ViewBag.Exito != null)
        {
            <p class="success">@ViewBag.Exito</p>
        }
        <a class="btn secondary" href="@Url.Action("Usuarios")">Volver</a>
    </div>
</main>
