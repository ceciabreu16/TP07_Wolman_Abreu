@*@{
    ViewData["Title"] = "Usuario";
}

<p>Usuario: @ViewBag.usuario</p>
<a href='@Url.Action("NuevaTarea")'>AGREGAR TAREA</a>
@if (ViewBag.listaTareas != null)
{
    @foreach (var tarea in ViewBag.listaTareas)
    {
    if (!tarea.EstaEliminada)
    {
        <div class="tarea-card">
            <span><strong>@tarea.Titulo</strong></span>
            <span>- Estado: 
                @{
                    if (tarea.EstaFinalizada) {
                        <span>Finalizada</span>;
                    } else {
                        <span>Activa</span>;
                    }
                }
            </span>
            <span>- Fecha: @tarea.FechaCreacion.ToString("yyyy-MM-dd")</span>
            <a href='@Url.Action("VerTarea", "Home", new { id = tarea.Id })'>Editar</a>
        </div>
    }
    }
}
else
{
    <p>No hay tareas disponibles.</p>
}
<form method="post" action="@Url.Action("CerrarSesion", "Home")" style="text-align:center; margin-top:2em;">
    <input type="submit" value="Cerrar sesión" style="font-size:1.1em; padding:0.6em 1.3em; background:#e24b98; color:#fff; border-radius:8px; border:none; cursor:pointer;" />
</form>
*@

@{
    ViewData["Title"] = "Usuario";
}
<header>
    <h2>Usuario: @ViewBag.usuario</h2>
</header><main>
    <a class="btn" href='@Url.Action("NuevaTarea")'>Agregar Tarea</a>
    
    <div class="task-grid">
    @if (ViewBag.listaTareas != null)
    {
        foreach (var tarea in ViewBag.listaTareas)
        {
            if (!tarea.EstaEliminada)
            {
                var cardClass = tarea.EsPropia ? "card-propia" : "card-compartida";
                var tipoTarea = tarea.EsPropia ? "Tarea propia" : "Tarea compartida";
    <div class="task-card @cardClass">
        <h3>@tarea.Titulo</h3>
        <p class="tipo-tarea">@tipoTarea</p>
        <p><strong>Fecha:</strong> @tarea.FechaCreacion.ToString("yyyy-MM-dd")</p>
        <p><strong>Estado:</strong> @(tarea.EstaFinalizada ? "Finalizada" : "Activa")</p>
        @if (tarea.EsPropia)
        {
            <a href='@Url.Action("VerTarea", "Home", new { id = tarea.Id })'>Editar</a>
        }
        else
        {
            <span style="color:gray;">No editable</span>
        }
    </div>
            }
        }
    }
    else
    {
        <p>No hay tareas disponibles.</p>
    }
    </div>

    <form method="post" action="@Url.Action("CerrarSesion", "Home")" class="logout-form">
        <input type="submit" value="Cerrar sesión" class="btn danger" />
    </form>
</main>
